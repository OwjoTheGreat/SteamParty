<!DOCTYPE html>

<html>
    <head>
        <title>title</title>
        <script src="Scripts/jquery-2.0.0.js"></script>
        <script src="Scripts/knockout-2.2.1.js"></script>
        <script src="Scripts/knockout.mapping-latest.js"></script>
        <script type="text/javascript">
            var ids = new Array();
            ids[0] = "76561197975995523"; // ice_mouton
            ids[1] = "76561197962208538"; // dubispacebar
            ids[2] = "76561197965572012"; // siliticx
            
            //$(document).ready(function () {
            //    var viewModel = {};
            //    $.getJSON('/jsonservice', { steamids: ids.join(",") }, function (data) {
            //        viewModel.model = ko.mapping.fromJS(data.toString());
            //        ko.applyBindings(viewModel);
            //    }
            //    );
            //});
            
            function AppViewModel() {
                var self = this;
                self.steamIds = ko.observable('');
                self.resultData = ko.observable(); // No initial value

                self.getCompare = function () {
                    $.getJSON('/jsonservice', { steamids: ids.join(",") }, function (data) {
                        ko.mapping.fromJS(data);
                    });
                };
            }

            ko.applyBindings(new AppViewModel());
        </script>
    </head>
    <body>
        
        <form data-bind="submit: getCompare">
            Steam Ids:<input data-bind="value: steamIds" value="76561197975995523,76561197962208538,76561197965572012" />
            <button type="submit">Compare</button>
        </form>
        
        <table>
            <tbody data-bind="with: resultData">
                <tr>
                    <td><span data-bind="text: Name"></span></td>
                    <td>
                        <div data-bind="foreach: Players">
                            <img data-bind="src: Avatar64"/>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        
    </body>
</html>